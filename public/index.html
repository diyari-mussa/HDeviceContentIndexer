<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üîç Digital Forensic Indexer</h1>
            <nav>
                <ul>
                    <li><a href="index.html" class="active">üîç Search</a></li>
                    <li><a href="upload.html">üì§ Upload</a></li>
                    <li><a href="devices.html">üì± Devices</a></li>
                    <li><a href="crawler.html">ü§ñ Crawler</a></li>
                    <li><a href="settings.html">‚öôÔ∏è Settings</a></li>
                </ul>
            </nav>
        </header>

        <div class="search-container">
            <!-- Search Type Tabs -->
            <div class="search-tabs">
                <div class="tab-btn active" data-tab="general">General Search</div>
                <div class="tab-btn" data-tab="mobile">Mobile Number Search</div>
            </div>

            <!-- General Search View -->
            <div id="generalSearchAuth" class="search-view">
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <input type="text" id="searchInput" placeholder="Enter keywords (e.g. john doe)...">
                    <button id="searchBtn" class="btn btn-primary">SEARCH</button>
                </div>
                <div style="margin-bottom: 15px;">
                     <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <input type="checkbox" id="advancedSearchToggle">
                        <span>Wildcard / Advanced Search</span>
                    </label>
                </div>
            </div>

            <!-- Mobile Search View -->
            <div id="mobileSearchAuth" class="search-view" style="display: none;">
                <div class="mobile-search-mockup">
                    <div class="mobile-display" id="mobileDisplay">Ready.</div>
                    <div style="padding: 20px 0;">
                        <input type="text" id="mobileInput" placeholder="Enter phone number..." style="background: #112240; border: 1px solid #233554; color: #64ffda; text-align: center; font-size: 1.2rem; letter-spacing: 2px; width: 100%; max-width: 400px; padding: 12px; border-radius: 4px;">
                    </div>
                    <button id="mobileSearchBtn" class="btn btn-primary" style="width: 100%;">TRACE NUMBER</button>
                </div>
            </div>
        </div>

        <!-- Selected Index Info -->
        <div style="margin-bottom: 20px; text-align: right; color: var(--text-secondary);">
            Current Index: <span id="selectedIndexDisplay" style="color: var(--primary-cyan); font-weight: bold;">(loading...)</span>
            <span id="globalSearchIndicator" style="display:none; color: var(--accent-blue); margin-left: 10px;">(Searching ALL Indexes)</span>
        </div>

        <!-- Statistics Dashboard -->
        <div id="statisticsDashboard" class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3>üìä System Statistics</h3>
                <button id="refreshStatsBtn" class="btn">üîÑ Refresh</button>
            </div>
            <div id="statsContainer" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                <div class="loader"></div> Loading statistics...
            </div>
        </div>
            
        <!-- Search Results -->
        <div class="results-container" id="searchResults" style="display:none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid var(--border-color); padding-bottom: 10px;">
                <h3>Search Results (<span id="resultCount">0</span>)</h3>
            </div>
            
            <div id="searchVariations" style="display:none; margin-bottom: 20px; padding: 15px; background: rgba(100, 255, 218, 0.05); border: 1px solid var(--primary-cyan); border-radius: 4px;"></div>
            
            <div id="resultsContainerContent">
                <!-- Results injected here -->
            </div>
        </div>
    </div>

    <script src="search.js"></script>
    <script>
        // Simple cookie logic
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
            return null;
        }
        const cachedIndex = getCookie('selectedIndex');
        const disp = document.getElementById('selectedIndexDisplay');
        if (disp && cachedIndex) disp.innerText = cachedIndex;
        
        // Show global indicator
        if (localStorage.getItem('searchAllIndexes') === 'true') {
            document.getElementById('globalSearchIndicator').style.display = 'inline';
        }
    </script>
</body>
</html>
