<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>ğŸ” <span class="gradient-text">Search Dashboard</span></h1>
        <div style="display:flex; align-items:center; gap:12px; margin-bottom:20px; flex-wrap: wrap;">
            <a href="upload.html" class="control-btn" style="text-decoration: none;">ğŸ“¤ Upload Files</a>
            <a href="devices.html" class="control-btn" style="text-decoration: none;">ğŸ“± Devices</a>
            <a href="crawler.html" class="control-btn" style="text-decoration: none;">ğŸ¤– Crawler</a>
            <a href="settings.html" class="control-btn" style="text-decoration: none;">âš™ï¸ Settings</a>
            <div style="flex: 1; min-width: 200px;">
                <span style="color: #64748b; font-size: 0.9rem;">Selected index:</span>
                <strong id="selectedIndexDisplay" style="color: #2563eb;">(none)</strong>
            </div>
        </div>

        <div class="search-section" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 24px;">
            <h3 style="color: #475569; margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px;">
                ğŸ” <span>Search</span>
            </h3>
            <div class="search-form" style="display: flex; gap: 12px; align-items: center; flex-wrap: wrap;">
                <input type="text" id="searchInput" placeholder="Enter keywords to search..." style="flex:1; min-width: 250px; padding:12px; border:2px solid #e2e8f0; border-radius:8px; font-size: 1rem;">
                <label style="display: flex; align-items: center; gap: 8px; padding: 8px 16px; background: #f1f5f9; border-radius: 8px; cursor: pointer; user-select: none;">
                    <input type="checkbox" id="advancedSearchToggle" style="width: 18px; height: 18px; cursor: pointer;">
                    <span style="font-weight: 600; color: #475569;">ğŸ” Advanced Search (Substring Match)</span>
                </label>
                <button id="searchBtn" class="control-btn" style="padding: 12px 24px; font-size: 1rem;">ğŸ” Search</button>
            </div>
            <div id="advancedSearchInfo" style="display: none; margin-top: 12px; padding: 12px; background: #dbeafe; border-left: 4px solid #3b82f6; border-radius: 6px;">
                <strong style="color: #1e40af;">â„¹ï¸ Advanced Search Enabled</strong>
                <p style="margin: 4px 0 0 0; color: #1e3a8a; font-size: 0.9rem;">â€¢ Finds partial matches (e.g., "facebook" will match "com.facebook.thing")<br>â€¢ Searches phone numbers in multiple formats automatically<br>â€¢ Uses wildcard matching for comprehensive results</p>
            </div>
        </div>
            
        <!-- Statistics Dashboard -->
        <div id="statisticsDashboard" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            <h3 style="color: #475569; margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px;">
                ğŸ“Š <span>Index Statistics</span>
                <button id="refreshStatsBtn" style="margin-left: auto; padding: 6px 12px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem; font-weight: 600;">ğŸ”„ Refresh</button>
            </h3>
            <div id="statsContainer" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                <div style="text-align: center; padding: 20px; color: #64748b;">Loading statistics...</div>
            </div>
        </div>
            
        <div class="search-results" id="searchResults" style="display:none; margin-top:24px;">
            <h3 style="color: #475569; margin-bottom: 16px;">Search Results (<span id="resultCount">0</span>)</h3>
            <div id="searchVariations" style="display:none; margin-bottom: 16px; padding: 12px; background: #f0f9ff; border: 1px solid #bae6fd; border-radius: 8px;"></div>
            <div id="resultsContainer" style="border:2px solid #e2e8f0; border-radius:8px; max-height:600px; overflow:auto; padding:16px; background: white;"></div>
        </div>
        </div>
    </div>

    <script>
        // Cookie helper functions
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
            return null;
        }

        // Load selected index from cookie
        const selectedIndexDisplay = document.getElementById('selectedIndexDisplay');
        const cachedIndex = getCookie('selectedIndex');
        if (cachedIndex && selectedIndexDisplay) {
            selectedIndexDisplay.textContent = cachedIndex;
            selectedIndexDisplay.style.color = '#2563eb';
        }
    </script>
    <script src="search.js"></script>
</body>
</html>
